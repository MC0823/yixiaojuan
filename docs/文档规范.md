# 易小卷 - 文档规范

> 本文档定义了易小卷项目的文档管理规范，基于5S规范的专项要求

---

## 一、文档管理核心原则

项目文档必须遵循以下原则：

1. **说明文档是唯一源** - `docs/易小卷/说明文档.md` 是项目全生命周期的唯一管理载体
2. **及时更新** - 完成工作后立即更新文档进度
3. **明确可落地** - 所有计划和要求必须具体、可执行、可验证
4. **可追踪** - 每个决策、每个任务都有清晰的记录

---

## 二、说明文档的使用规范

### 2.1 开发前必读

**每次开始工作前，必须：**

1. ✅ **打开** `说明文档.md`
2. ✅ **阅读** 当前项目规划和里程碑
3. ✅ **确认** 当前阶段和待做事项
4. ✅ **查看** 上次遇到的问题和解决方案

```markdown
# 示例：打开说明文档后，检查以下内容

一、项目规划
  → 当前在哪个阶段？
  → 下一个里程碑是什么？

三、进度记录
  → 上次完成了哪些任务？
  → 有哪些遗留的问题？

四、待确认事项
  → 是否有需要确认的决策？
```

### 2.2 开发后必更

**完成任何工作任务后，立即执行以下步骤：**

#### 第1步：更新「开发日志」

在 `三、进度记录 → 3.1 开发日志` 中添加新行：

```markdown
| 日期 | 完成任务 | 完成情况 | 备注 |
|------|----------|----------|------|
| 2025-12-09 | T2.1 Main进程框架 | ✅已完成 | 完成了WindowManager和IPC注册 |
| 2025-12-09 | 集成优化-XXX | ✅已完成 | 修复了之前的YYY问题 |
```

**格式说明：**
- `日期`：YYYY-MM-DD 格式
- `完成任务`：任务ID + 任务名称（例：T2.1 Main进程框架）
- `完成情况`：✅已完成 / ⏳进行中 / ❌未完成
- `备注`：简要说明完成内容和问题

#### 第2步：更新「任务清单」状态

在 `一、项目规划 → 1.4 任务清单总览` 中找到对应的任务，更新状态：

```markdown
# 找到原来的
| T2.1 | Main进程框架 | 4h | ⏳待开始 |

# 改为
| T2.1 | Main进程框架 | 4h | ✅已完成 |
```

#### 第3步：更新「工时统计」

在 `二、实施方案 → 2.3 工时统计` 中，更新对应阶段的数据：

```markdown
# 修改前
| 阶段2 | 6 | 21h | 0h | 0% |

# 修改后
| 阶段2 | 6 | 21h | 4h | 19% |
```

### 2.3 遇到问题必记

**开发中遇到技术问题时，必须在「问题记录」中记录：**

```markdown
| 日期 | 问题描述 | 解决方案 | 状态 |
|------|----------|----------|------|
| 2025-12-09 | OCR识别中文输出乱码 | 更新Tesseract.js语言包为简体中文 | ✅已解决 |
```

**记录要点：**
- ✅ 问题描述要明确具体
- ✅ 解决方案要可复现
- ✅ 标记最终状态（已解决/待解决/后续跟进）

---

## 三、文档创建规范

### 3.1 什么时候创建新文档

**不创建文档的情况：**
- ❌ 临时的代码验证或测试说明
- ❌ 不影响后续开发的优化细节
- ❌ 可以通过代码注释说明的内容

**必须创建文档的情况：**
- ✅ 新的技术决策或架构变更
- ✅ 新增的功能模块或API
- ✅ 复杂的业务流程或算法
- ✅ 与后端API的契约变更

### 3.2 文档命名规范

```
docs/易小卷/
├── 00_文档导航.md              # 文档入口（编号优先）
├── 代码规范.md                 # 规范文档（不编号）
├── 文档规范.md
│
├── ALIGNMENT_易小卷.md         # 6A流程文档（保持原名）
├── CONSENSUS_易小卷.md
├── DESIGN_易小卷.md
├── TASK_易小卷.md
│
├── 说明文档.md                 # 项目管理文档（不编号）
├── 项目分析报告.md
├── 优化方案.md
└── 优化完成总结.md
```

**命名规则：**
- 中文文档名：`描述.md`（不加编号，除非是导航/索引）
- 6A流程文档：保持原命名不变
- 避免出现多个版本的文档（v1.0、v1.1等）

---

## 四、文档更新节奏

### 4.1 日更新（每天）

**完成工作后立即更新：**
- 说明文档.md 的「开发日志」
- 说明文档.md 的「任务清单」状态
- 说明文档.md 的「问题记录」（如有问题）

**时间投入：**约5分钟

### 4.2 周更新（每周五）

**汇总本周工作并做整体更新：**
- 更新「工时统计」表
- 更新「里程碑」进度
- 检查是否有遗留问题需要处理
- 确认下周工作计划

**时间投入：**约15分钟

### 4.3 阶段更新（完成一个阶段）

**完成一个开发阶段后执行：**
- 生成或更新「项目分析报告.md」
- 记录本阶段的技术债务
- 优化建议的归纳
- 下一阶段的计划确认

**时间投入：**约1小时

---

## 五、项目规划的编写规范

### 5.1 里程碑定义

每个里程碑必须包含以下信息：

```markdown
| 里程碑 | 完成任务 | 计划日期 | 实际日期 | 状态 |
|--------|----------|----------|----------|------|
| M1 基础可运行 | T1.1-T2.6 | 2025-12-14 | - | ⏳进行中 |
```

**要求：**
- ✅ 计划日期必须明确（YYYY-MM-DD）
- ✅ 完成任务范围必须清晰（哪些T*.* 任务）
- ✅ 实际日期在完成后填写
- ✅ 状态及时更新

### 5.2 任务清单定义

每个任务必须包含：

```markdown
| 任务ID | 任务描述 | 工时 | 状态 |
|--------|----------|------|------|
| T2.1 | Main进程框架 | 4h | ⏳待开始 |
```

**要求：**
- ✅ 任务ID 按 T阶段.序号 格式（例：T2.1）
- ✅ 任务描述 简洁明了，对应TASK文档中的具体任务
- ✅ 工时 基于TASK文档的估算，不能随意改动
- ✅ 状态 有三个选项：⏳待开始 / ⏳进行中 / ✅已完成

---

## 六、技术决策文档化

### 6.1 重要决策记录格式

当进行重要技术决策时，必须在「待确认事项」中记录：

```markdown
### 待确认事项

| 序号 | 问题 | 建议方案 | 您的决策 |
|------|------|----------|----------|
| D1 | OCR引擎选择 | Tesseract.js vs PaddleOCR | ✅ Tesseract.js（离线、轻量） |
| D2 | 白板实现方案 | Fabric.js vs Canvas原生 | ✅ Fabric.js（功能完整） |
```

**决策一旦确认，应该：**
1. 更新对应的DESIGN/CONSENSUS文档
2. 标记「已确认」状态
3. 记录做出决策的日期

---

## 七、进度跟踪规范

### 7.1 进度可视化

说明文档中必须清晰显示进度：

```markdown
## 二、实施方案

### 2.3 工时统计

| 阶段 | 任务数 | 预计工时 | 已完成工时 | 完成率 |
|------|--------|----------|------------|--------|
| 阶段1 | 3 | 10h | 10h | 100% |   ✅ 完成
| 阶段2 | 6 | 21h | 8h | 38% |    🟡 进行中
| 阶段3 | 4 | 22h | 0h | 0% |     ⏳ 待开始
```

**显示规则：**
- 完成率 ≥ 100%：✅ 完成
- 完成率 > 0% 且 < 100%：🟡 进行中
- 完成率 = 0%：⏳ 待开始

### 7.2 问题追踪

问题记录表必须保持更新：

```markdown
### 3.2 问题记录

| 日期 | 问题描述 | 解决方案 | 状态 |
|------|----------|----------|------|
| 2025-12-08 | electron module not defined | 修复vite.config.ts的electronFix插件 | ✅已解决 |
| 2025-12-09 | OCR识别慢 | ⏳ 待优化 | 需要后续性能测试 |
```

---

## 八、文档同步规范

### 8.1 代码变更后必须同步文档

**重要原则：** 代码有变，文档必须同步更新

| 代码变更类型 | 对应文档 | 更新内容 |
|-----------|---------|--------|
| 新增API接口 | DESIGN_易小卷.md | 在「接口契约定义」章节添加 |
| 新增数据表 | DESIGN_易小卷.md | 在「数据库Schema」章节添加 |
| 架构调整 | DESIGN_易小卷.md | 更新「整体架构图」 |
| 完成功能任务 | 说明文档.md | 更新「开发日志」和「任务清单」 |
| 遇到技术问题 | 说明文档.md | 在「问题记录」中记录 |

### 8.2 文档审查清单

完成文档编写后，请对照以下清单自检：

- [ ] 内容准确，与代码实现一致
- [ ] 格式规范，使用统一的表格/代码块格式
- [ ] 链接有效，所有文档链接都能正确跳转
- [ ] 版本清晰，有创建/更新时间
- [ ] 完整性，涵盖所有相关的实现细节

---

## 九、文档版本管理

### 9.1 版本号规则

采用 `v主版本.副版本` 的版本号格式：

```markdown
> 文档状态：已完成  
> 创建时间：2025-12-08  
> 最后更新：2025-12-09
> 版本：v1.0
```

**版本号变更规则：**
- **v1.0 → v1.1**：小的更新（修复错误、增加补充说明）
- **v1.0 → v2.0**：重大更新（架构调整、需求变更）

### 9.2 文档存档

当文档有重大版本更新时，保留历史版本：

```
docs/易小卷/
├── DESIGN_易小卷.md         # 当前版本
├── DESIGN_易小卷_v1.0.md    # 历史存档（如需要）
```

---

## 十、建议使用的工具

### 10.1 markdown编辑器

推荐使用支持实时预览的编辑器：
- VS Code + Markdown Preview Enhanced 插件
- 1Doc（在线协作）
- Typora（付费，但体验好）

### 10.2 版本控制

所有文档都应该纳入Git版本控制：

```bash
git add docs/
git commit -m "docs: 更新说明文档，新增T2.1任务完成记录"
```

**提交消息规范：**
- `docs: 更新xxx文档` - 文档更新
- `docs: 新增xxx功能文档` - 新文档
- `docs: 修复xxx错别字` - 文档修正

---

## 十一、文档检查清单

在提交文档前，请对照以下清单：

- [ ] 所有日期格式统一为 YYYY-MM-DD
- [ ] 所有表格对齐，没有格式混乱
- [ ] 所有链接有效（如有内部链接）
- [ ] 没有拼写错误和语法错误
- [ ] 代码块有正确的语言标识（```typescript 等）
- [ ] 重要信息用 ✅/❌/⏳ 符号标记
- [ ] 有版本号和更新日期
- [ ] 内容与当前代码实现保持同步

---

> 📝 创建日期：2025-12-09
> 🔗 关联规范：5S文档管理规范
> 📖 相关文档：00_文档导航.md、说明文档.md
